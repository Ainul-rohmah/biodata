<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form Biodata Siswa</title>
    <style>
       :root {
    --primary-color: #db8d34;
    --secondary-color: #2980b9;
    --light-color: #f8f9fa;
    --dark-color: #343a40;
    --border-color: #dee2e6;
    --success-color: #28a745;
    --error-color: #dc3545;
    --text-muted: #6c757d;
    --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.1);
    --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.1);
    --transition: all 0.3s ease;
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
}

body {
    background-color: var(--light-color);
    background: linear-gradient(135deg, #f5f7fa, #ffffff);
    color: var(--dark-color);
    line-height: 1.6;
    padding: 20px;
    min-height: 100vh;
}

.container {
    max-width: 1000px;
    margin: 0 auto;
    background: white;
    border-radius: 8px;
    box-shadow: var(--shadow-md);
    overflow: hidden;
    display: flex;
    flex-wrap: wrap;
}

.form-header {
    background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
    color: white;
    padding: 25px 20px;
    text-align: center;
    width: 100%;
}

.form-header h1 {
    font-size: 26px;
    margin-bottom: 8px;
    font-weight: 600;
    letter-spacing: 0.5px;
}

.form-header p {
    opacity: 0.9;
    font-size: 15px;
    margin-bottom: 5px;
    font-weight: 300;
}

.photo-upload {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin: 25px auto;
    padding: 25px;
    border: 2px dashed var(--border-color);
    border-radius: 10px;
    background-color: rgba(255, 255, 255, 0.3);
    max-width: 90%;
    transition: var(--transition);
}

.photo-upload:hover {
    border-color: var(--primary-color);
    background-color: rgba(255, 255, 255, 0.4);
}

.photo-preview {
    width: 100px;
    height: 130px;
    background-color: #f1f3f5;
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    border-radius: 8px;
    box-shadow: var(--shadow-sm);
    position: relative;
}

.photo-preview img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: none;
}

.photo-preview span {
    color: var(--text-muted);
    font-size: 14px;
    text-align: center;
    padding: 10px;
}

.photo-upload label {
    background-color: white;
    color: var(--primary-color);
    padding: 2px 3px;
    border-radius: 7px;
    cursor: pointer;
    font-size: 13px;
    transition: var(--transition);
    display: inline-flex;
    align-items: center;
    gap: 5px;
    font-weight: 400;
    border: 1px solid var(--border-color);
}

.photo-upload label:hover {
    background-color: #f8f9fa;
    transform: translateY(-2px);
    box-shadow: var(--shadow-sm);
}

.photo-upload input[type="file"] {
    display: none;
}

.form-column {
    flex: 1;
    min-width: 350px;
    padding: 30px;
}

.form-section {
    margin-bottom: 30px;
    border-bottom: 1px solid var(--border-color);
    padding-bottom: 20px;
}

.section-title {
    color: var(--primary-color);
    margin-bottom: 10px;
    padding-bottom: 5px;
    border-bottom: 2px solid var(--border-color);
    font-size: 15px;
    font-weight: 500;
    display: flex;
    align-items: center;
    gap: 10px;
}

.section-title i {
    font-size: 20px;
}

.form-group {
    margin-bottom: 20px;
}

label {
    display: block;
    margin-bottom: 8px;
    font-weight: 500;
    color: var(--dark-color);
    font-size: 15px;
    display: flex;
    align-items: center;
    gap: 8px;
}

.required-field::after {
    content: " *";
    color: var(--error-color);
}

input,
select,
textarea {
    width: 100%;
    padding: 12px 15px;
    border: 1px solid var(--border-color);
    border-radius: 6px;
    font-size: 15px;
    transition: var(--transition);
    background-color: #fff;
}

input:focus,
select:focus,
textarea:focus {
    border-color: var(--primary-color);
    outline: none;
    box-shadow: 0 0 0 3px rgba(219, 141, 52, 0.2);
}

textarea {
    min-height: 100px;
    resize: vertical;
    line-height: 1.5;
}

.form-footer {
    padding: 25px;
    background-color: #f8f9fa;
    border-top: 1px solid var(--border-color);
    text-align: center;
    width: 100%;
}

.btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    padding: 13px 28px;
    background-color: var(--primary-color);
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 16px;
    font-weight: 600;
    transition: var(--transition);
    min-width: 200px;
    box-shadow: var(--shadow-sm);
}

.btn:hover {
    background-color: var(--secondary-color);
    transform: translateY(-3px);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
}

.btn:active {
    transform: translateY(0);
}

@media (max-width: 576px) {
    body {
        padding: 10px;
        font-size: 10px;
    }

    .container {
      border-radius: 8px;
    }
    
    .form-column {
        min-width: 100%;
        padding: 15px;
    }

    .form-header {
        padding: 15px 10px;
    }

    .form-header h1 {
        font-size: 20px;
        margin-bottom: 5px;
    }

    .form-header p {
        font-size: 13px;
    }

    .btn {
        width: 100%;
    }
}

.error {
    border-color: var(--error-color) !important;
    animation: shake 0.4s ease-in-out;
}

@keyframes shake {
    0%, 100% { transform: translateX(0); }
    20%, 60% { transform: translateX(-5px); }
    40%, 80% { transform: translateX(5px); }
}

.address-row {
    display: flex;
    gap: 20px;
    margin-bottom: 20px;
}

.address-row .rt-group,
.address-row .rw-group {
    flex: 1;
}

.progress-container {
    width: 100%;
    background-color: #e9ecef;
    border-radius: 6px;
    margin-top: 20px;
    overflow: hidden;
}

.progress-bar {
    height: 10px;
    background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
    width: 0%;
    transition: width 0.5s ease;
}

.error-message {
    color: var(--error-color);
    font-size: 14px;
    margin-top: 8px;
    display: none;
}

/* Data hasil */
.data-container {
    display: none;
    max-width: 1000px;
    margin: 30px auto;
    background: white;
    border-radius: 10px;
    box-shadow: var(--shadow-md);
    padding: 30px;
    position: relative;
}

.data-header {
    text-align: center;
    margin-bottom: 30px;
    padding-bottom: 20px;
    border-bottom: 2px solid var(--primary-color);
}

.data-header h2 {
    color: var(--primary-color);
    font-size: 18px;
    margin-bottom: 1px;
}

.data-section {
    margin-bottom: 25px;
}

.data-section h3 {
    color: var(--primary-color);
    font-size: 20px;
    margin-bottom: 15px;
    padding-bottom: 8px;
    border-bottom: 1px solid var(--border-color);
}

.data-row {
    display: flex;
    margin-bottom: 12px;
    align-items: flex-start;
}

.data-label {
    font-weight: 300;
    width: 140px;
    color: var(--dark-color);
    position: relative;
    flex-shrink: 0;
}

.data-label::after {
    content: ":";
    position: absolute;
    right: 15px;
}

.data-value {
    flex: 1;
    padding-left: 2px;
    word-break: break-word;
}

.data-photo {
    text-align: center;
    margin-bottom: 25px;
}

.data-photo img {
    width: 140px;
    height: 160px;
    object-fit: cover;
    border-radius: 8px;
    border: 2px solid var(--border-color);
    box-shadow: var(--shadow-sm);
}

.btn-print {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 12px 24px;
    background-color: var(--primary-color);
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 15px;
    font-weight: 500;
    margin-top: 25px;
    text-decoration: none;
    transition: var(--transition);
}

.btn-print:hover {
    background-color: var(--secondary-color);
    transform: translateY(-2px);
    box-shadow: var(--shadow-sm);
}

/* Map styles */
#resultMap {
    margin-top: 15px;
    border: 1px solid var(--border-color);
    border-radius: 8px;
    height: 300px;
    width: 100%;
    box-shadow: var(--shadow-sm);
}

.leaflet-container {
    z-index: 1;
    font-family: inherit;
}

.leaflet-touch .leaflet-bar a {
    width: 15px;
    height: 20px;
    line-height: 1rem;
}

.leaflet-container .leaflet-control-attribution, .leaflet-container .leaflet-control-scale {
    font-size: 9px;
}

.map-marker-label {
    font-weight: bold;
    font-size: 14px;
    color: #333;
    text-shadow: 0 0 3px white;
}

/* Print styles */
@media print {
    body {
        margin: 0;
        padding: 0;
        font-size: 11pt;
        line-height: 1.3;
        background: white;
        color: black;
    }
    
    .container {
        display: none;
    }
    
    .data-container {
        display: block !important;
        width: 100%;
        margin: 0;
        padding: 15px;
        box-shadow: none;
        border-radius: 0;
        page-break-inside: avoid;
    }
    
    .data-photo {
        float: right;
        margin: 0 0 15px 20px;
    }
    
    .data-photo img {
        width: 120px;
        height: 150px;
    }
    
    .data-section {
        margin-bottom: 15px;
        page-break-inside: avoid;
    }
    
    .data-row {
        margin-bottom: 8px;
        display: flex;
        flex-wrap: wrap;
    }
    
    .data-label {
        width: 160px;
        font-size: 10.5pt;
    }
    
    .data-value {
        padding-left: 10px;
        font-size: 10.5pt;
    }
    
    #resultMap {
        height: 180px;
        page-break-inside: avoid;
    }
    
    .btn-print {
        display: none;
    }
    
    @page {
        size: A4;
        margin: 1cm;
    }
}

/* Utility classes */
.hidden {
    display: none !important;
}

.text-center {
    text-align: center;
}

.mt-3 {
    margin-top: 15px;
}

.mb-3 {
    margin-bottom: 15px;
}

/* Loading state */
.loading {
    position: relative;
    pointer-events: none;
    opacity: 0.7;
}

.loading::after {
    content: "";
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 20px;
    height: 20px;
    border: 3px solid rgba(255, 255, 255, 0.3);
    border-radius: 50%;
    border-top-color: white;
    animation: spin 1s ease-in-out infinite;
}

@keyframes spin {
    to { transform: translate(-50%, -50%) rotate(360deg); }
}
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
</head>
<body>
    <div class="container" id="formContainer">
        <div class="form-header">
            <h1>BIODATA SISWA</h1>
            <!-- Input Foto -->
            <div class="photo-upload">
                <h2 style="color: white; margin-bottom: 15px; font-size: 18px;"></h2>
                <div class="photo-preview">
                    <img id="photoPreview" src="#" alt="Preview Foto">
                    <span>Foto</span>
                </div>
                <label for="photo">
                    <i class="fas fa-camera"></i> Pilih Foto
                </label>
                <input id="photo" name="photo" type="file" accept="image/*" required>
            </div>
        </div>

        <!-- Kolom Kiri -->
        <div class="form-column">
            <form id="registrationForm" action="submit_biodata.php" method="POST" enctype="multipart/form-data">
                <!-- Data Pribadi -->
                <div class="form-section">
                    <h3 class="section-title"><i class="fas fa-user-circle"></i> DATA PRIBADI</h3>
                    <div class="form-group">
                        <label class="required-field" for="nama_lengkap"><i class="fas fa-user"></i> Nama
                            Lengkap</label>
                        <input id="nama_lengkap" name="nama_lengkap" type="text" placeholder="Masukkan nama lengkap"
                            required>
                        <div class="error-message" id="nama_lengkap_error">Nama harus diisi</div>
                    </div>
                    <div class="form-group">
                        <label class="required-field" for="nama_panggilan"><i class="fas fa-user-tag"></i>
                            Panggilan</label>
                        <input id="nama_panggilan" name="nama_panggilan" type="text"
                            placeholder="Masukkan nama panggilan" required>
                        <div class="error-message" id="nama_panggilan_error">harus diisi</div>
                    </div>
                    <div class="form-group">
                        <label class="required-field" for="agama"><i class="fas fa-pray"></i> Agama</label>
                        <select id="agama" name="agama" required>
                            <option value="">Pilih Agama</option>
                            <option value="Islam">Islam</option>
                            <option value="Kristen">Kristen</option>
                            <option value="Katolik">Katolik</option>
                            <option value="Hindu">Hindu</option>
                            <option value="Buddha">Buddha</option>
                        </select>
                        <div class="error-message" id="agama_error">Agama harus dipilih</div>
                    </div>

                    <!-- Tempat tanggal lahir-->
                    <div class="form-group">
                        <label class="required-field" for="tempat_lahir"><i class="fas fa-map-marker-alt"></i>
                            Tempat Lahir</label>
                        <select id="tempat_lahir" name="tempat_lahir" required>
                            <option value="">Pilih Tempat Lahir</option>
                            <option value="Banyuwangi">Banyuwangi</option>
                            <option value="Jember">Jember</option>
                            <option value="Malang">Malang</option>
                            <option value="Lumajang">Lumajang</option>
                            <option value="Probolinggo">Probolinggo</option>
                                <option value="Pasuruan">Pasuruan</option>
                                <option value="Situbondo">Situbondo</option>
                                <option value="Bondowoso">Bondowoso</option>
                                <option value="Bojonegoro">Bojonegoro</option>
                                <option value="Tuban">Tuban</option>
                                <option value="Lamongan">Lamongan</option>
                                <option value="Gresik">Gresik</option>
                                <option value="Sidoarjo">Sidoarjo</option>
                                <option value="Mojokerto">Mojokerto</option>
                                <option value="Nganjuk">Nganjuk</option>
                                <option value="Madiun">Madiun</option>
                                <option value="Magetan">Magetan</option>
                                <option value="Ngawi">Ngawi</option>
                                <option value="Ponorogo">Ponorogo</option>
                                <option value="Pacitan">Pacitan</option>
                                <option value="Kediri">Kediri</option>
                                <option value="Tulungagung">Tulungagung</option>
                                <option value="Blitar">Blitar</option>
                                <option value="Trenggalek">Trenggalek</option>
                            </select>
                            <div class="error-message" id="tempat_lahir_error">Tempat harus dipilih</div>
                        </div>
                        <div class="form-group">
                            <label class="required-field" for="tanggal_lahir"><i class="fas fa-calendar-alt"></i>
                                Tanggal Lahir</label>
                            <input id="tanggal_lahir" name="tanggal_lahir" type="date" required>
                            <div class="error-message" id="tanggal_lahir_error">Tanggal harus diisi</div>
                        </div>
                         <div class="form-group">
                        <label class="required-field" for="anak_ke"><i class="fas fa-child"></i> Anak ke-</label>
                        <select id="anak_ke" name="anak_ke" required>
                            <option value="">Pilih Anak ke-</option>
                            <option value="1 (satu)">1</option>
                            <option value="2 (dua)">2</option>
                            <option value="3 (tiga)">3</option>
                            <option value="4 (empat)">4</option>
                            <option value="5 (lima)">5</option>
                            <option value="6 (enam)">6</option>
                            <option value="7 (tujuh)">7</option>
                            <option value="8 (delapan)">8</option>
                            <option value="9 (sembilan)">9</option>
                            <option value="10 (sepuluh)">10</option>
                            <option value="lebih">Lebih dari 10</option>
                        </select>
                        <div class="error-message" id="anak_ke_error">harus dipilih</div>
                    </div>

                    <div class="form-group">
                        <label class="required-field" for="jumlah_saudara"><i class="fas fa-users"></i> Jumlah
                            Saudara</label>
                        <select id="jumlah_saudara" name="jumlah_saudara" required>
                            <option value="">Pilih Jumlah Saudara</option>
                            <option value="0">Tidak ada</option>
                            <option value="1 (satu)">1</option>
                            <option value="2 (dua)">2</option>
                            <option value="3 (tiga)">3</option>
                            <option value="4 (empat)">4</option>
                            <option value="5 (lima)">5</option>
                            <option value="6 (enam)">6</option>
                            <option value="7 (tujuh)">7</option>
                            <option value="8 (delapan)">8</option>
                            <option value="9 (sembilan)">9</option>
                            <option value="10 (sepuluh)">10</option>
                            <option value="lebih">Lebih dari 10</option>
                        </select>
                        <div class="error-message" id="jumlah_saudara_error">harus dipilih</div>
                    </div>

                    <div class="form-group">
                        <label class="required-field" for="no_hp"><i class="fas fa-phone"></i> No. HP</label>
                        <input id="no_hp" name="no_hp" type="tel" placeholder="Masukkan nomor HP" required>
                        <div class="error-message" id="no_hp_error">harus diisi</div>
                    </div>
                    </div>
                   
          <!-- Data Sekolah -->

                <div class="form-section">
                    <h3 class="section-title"><i class="fas fa-school"></i> DATA SEKOLAH</h3>
                    <div class="form-group">
                        <label class="required-field" for="no_induk"><i class="fas fa-id-card"></i> No. Induk</label>
                        <input id="no_induk" name="no_induk" type="text" placeholder="Masukkan nomor induk" required>
                        <div class="error-message" id="no_induk_error">harus diisi</div>
                    </div>
                    <div class="form-group">
                        <label class="required-field" for="nisn"><i class="fas fa-id-card-alt"></i> NISN</label>
                        <input id="nisn" name="nisn" type="text" placeholder="Masukkan NISN" required>
                        <div class="error-message" id="nisn_error">harus diisi</div>
                    </div>
                    <div class="form-group">
                        <label class="required-field" for="kelas"><i class="fas fa-graduation-cap"></i> Kelas</label>
                        <select id="kelas" name="kelas" required>
                            <option value="">Pilih Kelas</option>
                            <option value="X (Sepuluh)">X (Sepuluh)</option>
                            <option value="XI (Sebelas)">XI (Sebelas)</option>
                            <option value="XII (Dua belas)">XII (Dua belas)</option>
                        </select>
                        <div class="error-message" id="kelas_error">harus dipilih</div>
                    </div>

                    <div class="form-group">
                        <label class="required-field" for="jurusan"><i class="fas fa-book"></i> Jurusan</label>
                        <select id="jurusan" name="jurusan" required>
                            <option value="">Pilih Jurusan</option>
                            <option value="Teknik Komputer dan Jaringan">Teknik Komputer dan Jaringan</option>
                            <option value="Rekayasa Perangkat Lunak">Rekayasa Perangkat Lunak</option>
                            <option value="Multimedia">Keperawatan</option>
                            <option value="Akuntansi">Teknik Pengelasan</option>
                            <option value="Pemasaran">Teknik Kendaraan Ringan</option>
                            <option value="Tata Boga">Teknik Sepeda Motor</option>
                        </select>
                        <div class="error-message" id="jurusan_error">harus dipilih</div>
                    </div>
          <!-- Kolom Kanan -->
            <!-- Data Orang Tua -->
            <div class="form-section">
                <h3 class="section-title"><i class="fas fa-users"></i> DATA ORANG TUA</h3>
                    <div class="form-group">
                        <label class="required-field" for="nama_ayah"><i class="fas fa-male"></i> Nama Ayah</label>
                        <input id="nama_ayah" name="nama_ayah" type="text" placeholder="Masukkan nama ayah" required>
                        <div class="error-message" id="nama_ayah_error">Nama ayah harus diisi</div>
                    </div>
                    <div class="form-group">
                        <label class="required-field" for="pekerjaan_ayah"><i class="fas fa-briefcase"></i> Pekerjaan
                            Ayah</label>
                        <select id="pekerjaan_ayah" name="pekerjaan_ayah" required>
                            <option value="">Pilih Pekerjaan</option>
                            <option value="petani">Petani</option>
                            <option value="buruh_harian">Buruh Harian</option>
                            <option value="guru">Guru</option>
                            <option value="tentara">Tentara</option>
                            <option value="polisi">Polisi</option>
                            <option value="nelayan">Nelayan</option>
                            <option value="wiraswasta">Wiraswasta</option>
                            <option value="sopir">Sopir</option>
                            <option value="montir">Montir</option>
                            <option value="pegawai_negeri">Pegawai Negeri</option>
                            <option value="programmer">Programmer</option>
                            <option value="dosen">Dosen</option>
                            <option value="pengacara">Pengacara</option>
                        </select>
                        <div class="error-message" id="pekerjaan_ayah_error">Pekerjaan ayah harus dipilih</div>
                    </div>
                    <div class="form-group">
                        <label class="required-field" for="pendidikan_ayah"><i class="fas fa-user-graduate"></i>
                            Pendidikan Ayah</label>
                        <select id="pendidikan_ayah" name="pendidikan_ayah" required>
                            <option value="">Pilih Pendidikan</option>
                            <option value="SD">SD</option>
                            <option value="SMP">SMP</option>
                            <option value="SMA/SMK">SMA/SMK</option>
                            <option value="D1-D3">D1-D3</option>
                            <option value="S1">S1</option>
                            <option value="S2">S2</option>
                            <option value="S3">S3</option>
                        </select>
                        <div class="error-message" id="pendidikan_ayah_error">Pendidikan ayah harus dipilih</div>
                    </div>
                    <div class="form-group">
                        <label class="required-field" for="nama_ibu"><i class="fas fa-female"></i> Nama Ibu</label>
                        <input id="nama_ibu" name="nama_ibu" type="text" placeholder="Masukkan nama ibu" required>
                        <div class="error-message" id="nama_ibu_error">Nama ibu harus diisi</div>
                    </div>
                    <div class="form-group">
                        <label class="required-field" for="pekerjaan_ibu"><i class="fas fa-briefcase"></i> Pekerjaan
                            Ibu</label>
                        <select id="pekerjaan_ibu" name="pekerjaan_ibu" required>
                            <option value="">Pilih Pekerjaan</option>
                            <option value="ibu rumah tangga">Ibu Rumah Tangga</option>
                            <option value="guru">Guru</option>
                            <option value="perias/mua">Perias/MUA</option>
                            <option value="dokter">Dokter</option>
                            <option value="perawat">Perawat</option>
                            <option value="pengacara">Pengacara</option>
                            <option value="dosen">Dosen</option>
                            <option value="pengusaha">Pengusaha</option>
                            <option value="jurnalis">Jurnalis</option>
                            <option value="pramugari">Pramugari</option>
                        </select>
                        <div class="error-message" id="pekerjaan_ibu_error">Pekerjaan ibu harus dipilih</div>
                    </div>
                    <div class="form-group">
                        <label class="required-field" for="pendidikan_ibu"><i class="fas fa-user-graduate"></i>
                            Pendidikan Ibu</label>
                        <select id="pendidikan_ibu" name="pendidikan_ibu" required>
                            <option value="">Pilih Pendidikan</option>
                            <option value="SD">SD</option>
                            <option value="SMP">SMP</option>
                            <option value="SMA/SMK">SMA/SMK</option>
                            <option value="D1-D3">D1-D3</option>
                            <option value="S1">S1</option>
                            <option value="S2">S2</option>
                            <option value="S3">S3</option>
                        </select>
                        <div class="error-message" id="pendidikan_ibu_error">Pendidikan ibu harus dipilih</div>
                    </div>
                </div>

                <!-- Kontak dan Alamat -->
                <div class="form-section">
                    <h3 class="section-title"><i class="fas fa-home"></i> KONTAK DAN ALAMAT</h3>

                    <div class="form-group">
                        <label class="required-field" for="kecamatan"><i class="fas fa-map-marker-alt"></i>
                            Kecamatan</label>
                        <select id="kecamatan" name="kecamatan" required>
                            <option value="">Pilih Kecamatan</option>
                            <option value="Banyuwangi">Banyuwangi</option>
                            <option value="Glagah">Glagah</option>
                            <option value="Giri">Giri</option>
                            <option value="Kabat">Kabat</option>
                            <option value="Rogojampi">Rogojampi</option>
                            <option value="Blimbingsari">Blimbingsari</option>
                            <option value="Genteng">Genteng</option>
                            <option value="Kalibaru">Kalibaru</option>
                            <option value="Glenmore">Glenmore</option>
                            <option value="Srono">Srono</option>
                            <option value="Cluring">Cluring</option>
                            <option value="Muncar">Muncar</option>
                            <option value="Tegaldlimo">Tegaldlimo</option>
                            <option value="Purwoharjo">Purwoharjo</option>
                            <option value="Gambiran">Gambiran</option>
                            <option value="Siliragung">Siliragung</option>
                            <option value="Bangorejo">Bangorejo</option>
                            <option value="Pesanggaran">Pesanggaran</option>
                            <option value="Sempu">Sempu</option>
                            <option value="Songgon">Songgon</option>
                            <option value="Licin">Licin</option>
                            <option value="Wongsorejo">Wongsorejo</option>
                            <option value="Singojuruh">Singojuruh</option>
                            <option value="Kalipuro">Kalipuro</option>
                            <option value="Tegalsari">Tegalsari</option>
                        </select>
                        <div class="error-message" id="kecamatan_error">Kecamatan harus dipilih</div>
                    </div>

                    <div class="form-group">
                        <label class="required-field" for="desa"><i class="fas fa-map-marker"></i>
                            Desa/Kelurahan</label>
                        <select id="desa" name="desa" required>
                            <option value="">Pilih Kecamatan</option>
                            <option value="Banyuwangi">Banyuwangi</option>
                            <option value="Glagah">Glagah</option>
                            <option value="Giri">Giri</option>
                            <option value="Kabat">Kabat</option>
                            <option value="Rogojampi">Rogojampi</option>
                            <option value="Blimbingsari">Blimbingsari</option>
                            <option value="Genteng">Genteng</option>
                            <option value="Kalibaru">Kalibaru</option>
                            <option value="Glenmore">Glenmore</option>
                            <option value="Srono">Srono</option>
                            <option value="Cluring">Cluring</option>
                            <option value="Muncar">Muncar</option>
                            <option value="Tegaldlimo">Tegaldlimo</option>
                            <option value="Purwoharjo">Purwoharjo</option>
                            <option value="Gambiran">Gambiran</option>
                            <option value="Siliragung">Siliragung</option>
                            <option value="Bangorejo">Bangorejo</option>
                            <option value="Pesanggaran">Pesanggaran</option>
                            <option value="Sempu">Sempu</option>
                            <option value="Songgon">Songgon</option>
                            <option value="Licin">Licin</option>
                            <option value="Wongsorejo">Wongsorejo</option>
                            <option value="Singojuruh">Singojuruh</option>
                            <option value="Kalipuro">Kalipuro</option>
                            <option value="Tegalsari">Tegalsari</option>
                        </select>
                        <div class="error-message" id="desa_error">Desa/kelurahan harus diisi</div>
                    </div>

                    <div class="form-group">
                        <label class="required-field" for="jalan"><i class="fas fa-road"></i> Jalan</label>
                        <input type="text" id="jalan" name="jalan" placeholder="Masukkan nama jalan" required>
                        <div class="error-message" id="jalan_error">Nama jalan harus diisi</div>
                    </div>

                    <div class="address-row">
                        <div class="form-group rt-group">
                            <label class="required-field" for="rt"><i class="fas fa-map-pin"></i> RT</label>
                            <select id="rt" name="rt" required>
                                <option value="">Pilih RT</option>
                                <option value="01">01</option>
                                <option value="02">02</option>
                                <option value="03">03</option>
                                <option value="04">04</option>
                                <option value="05">05</option>
                            </select>
                            <div class="error-message" id="rt_error">RT harus dipilih</div>
                        </div>
                        <div class="form-group rw-group">
                            <label class="required-field" for="rw"><i class="fas fa-map-pin"></i> RW</label>
                            <select id="rw" name="rw" required>
                                <option value="">Pilih RW</option>
                                <option value="01">01</option>
                                <option value="02">02</option>
                                <option value="03">03</option>
                                <option value="04">04</option>
                                <option value="05">05</option>
                            </select>
                            <div class="error-message" id="rw_error">RW harus dipilih</div>
                        </div>
                    </div>
                </div>
                <div class="form-group">
        <label for="lokasi"><i class="fas fa-map-marked-alt"></i> Pin Lokasi
            Rumah</label>
        <div id="map"
                        style="height: 300px; width: 100%; border: 1px solid #ddd; border-radius: 5px; margin-top: 10px;">
                    </div>
                    <input type="hidden" id="latitude" name="latitude">
                    <input type="hidden" id="longitude" name="longitude">
                    <small class="text-muted">Geser pin ke lokasi rumah Anda</small>
                </div>
            </form>
        </div>
    </div>
                </div>
            </form>
        </div>           
                </div>

    

    <div class="form-footer">
        <button class="btn" type="submit" form="registrationForm">
            <i class="fas fa-paper-plane"></i> KIRIM BIODATA
        </button>
    </div>

    <!-- Progress bar -->
    <div class="progress-container">
        <div id="progressBar" class="progress-bar"></div>
    </div>

    <!-- Data hasil -->
    <div class="data-container" id="dataContainer">
        <div class="data-header">
            <p>MAJELIS PENDIDIKAN DASAR DAN MENENGAH DAERAH MUHAMMADIYAH BANYUWANGI</p>
            <h2>SMK MUHAMMADIYAH 6 ROGOJAMPI</h2>
            <p>Website : www.smkmuh6rgj.sch.id / Email : webmaster@smkmuh6rgj.sch.id</p>
            <p>Jln.KH.Hasyim Asy'ari No.38 Rogojampi Telp./Fax : (0333) 631793 Banyuwangi 684662</p>

        </div>

        <div class="data-photo">
            <img id="dataPhoto" src="#" alt="Foto Siswa">
        </div>

        <div class="data-section">
            <!-- <h3><i class="fas fa-user-circle"></i> DATA PRIBADI</h3> -->
            <div class="data-row">
                <div class="data-label">Nama Lengkap</div>
                <div class="data-value" id="dataNamaLengkap"></div>
            </div>
            <div class="data-row">
                <div class="data-label">Nama Panggilan</div>
                <div class="data-value" id="dataNamaPanggilan"></div>
            </div>
            <div class="data-row">
                <div class="data-label">Agama</div>
                <div class="data-value" id="dataAgama"></div>
            </div>
            <div class="data-row">
                <div class="data-label">Tempat, Tanggal Lahir</div>
                <div class="data-value" id="dataTtl"></div>
            </div>
            <div class="data-row">
                <div class="data-label">Anak ke-</div>
                <div class="data-value" id="dataAnakKe"></div>
            </div>
            <div class="data-row">
                <div class="data-label">Jumlah Saudara</div>
                <div class="data-value" id="dataJumlahSaudara"></div>
            </div>
            <div class="data-row">
                <div class="data-label">No. HP</div>
                <div class="data-value" id="dataNoHp"></div>
            </div>
        </div>

        <div class="data-section">
            <!-- <h3><i class="fas fa-school"></i> DATA SEKOLAH</h3> -->
            <div class="data-row">
                <div class="data-label">No. Induk</div>
                <div class="data-value" id="dataNoInduk"></div>
            </div>
            <div class="data-row">
                <div class="data-label">NISN</div>
                <div class="data-value" id="dataNisn"></div>
            </div>
            <div class="data-row">
                <div class="data-label">Kelas</div>
                <div class="data-value" id="dataKelas"></div>
            </div>
            <div class="data-row">
                <div class="data-label">Jurusan</div>
                <div class="data-value" id="dataJurusan"></div>
            </div>
        </div>

        <div class="data-section">
            <!-- <h3><i class="fas fa-users"></i> DATA ORANG TUA</h3> -->
            <div class="data-row">
                <div class="data-label">Nama Ayah</div>
                <div class="data-value" id="dataNamaAyah"></div>
            </div>
            <div class="data-row">
                <div class="data-label">Pekerjaan Ayah</div>
                <div class="data-value" id="dataPekerjaanAyah"></div>
            </div>
            <div class="data-row">
                <div class="data-label">Pendidikan Ayah</div>
                <div class="data-value" id="dataPendidikanAyah"></div>
            </div>
            <div class="data-row">
                <div class="data-label">Nama Ibu</div>
                <div class="data-value" id="dataNamaIbu"></div>
            </div>
            <div class="data-row">
                <div class="data-label">Pekerjaan Ibu</div>
                <div class="data-value" id="dataPekerjaanIbu"></div>
            </div>
            <div class="data-row">
                <div class="data-label">Pendidikan Ibu</div>
                <div class="data-value" id="dataPendidikanIbu"></div>
            </div>
        </div>

        <div class="data-section">
            <!-- <h3><i class="fas fa-map-marked-alt"></i> LOKASI RUMAH</h3> -->
            <div class="data-row">
                <div class="data-label">Alamat Lengkap</div>
                <div class="data-value" id="dataAlamat"></div>
            </div>
            <!-- <div class="data-row">
                <div class="data-label">Peta Lokasi</div>
                <div class="data-value">
                    <div id="resultMap" style="height: 300px; width: 100%; border: 1px solid #ddd; border-radius: 5px;">
                    </div>
                </div>
            </div>
        </div> -->
    </div>

    <!-- <div class="data-row">
                <div class="data-label">Kecamatan:</div>
                <div class="data-value" id="dataKecamatan"></div>
            </div>
            <div class="data-row">
                <div class="data-label">Desa/Kelurahan:</div>
                <div class="data-value" id="dataDesa"></div>
            </div> -->
    </div>

    <div style="text-align: center;">
        <!-- <a href="#" class="btn-print" onclick="window.print()"><i class="fas fa-print"></i> Cetak Biodata</a> -->
        <button class="btn-print" onclick="backToForm()"><i class="fas fa-edit"></i> Edit Kembali</button>
    </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const form = document.getElementById('registrationForm');
            const formContainer = document.getElementById('formContainer');
            const dataContainer = document.getElementById('dataContainer');
            const photoInput = document.getElementById('photo');
            const photoPreview = document.getElementById('photoPreview');
            const dataPhoto = document.getElementById('dataPhoto');
            const progressBar = document.getElementById('progressBar');

            // Fungsi untuk menampilkan preview foto
            if (photoInput && photoPreview) {
                photoInput.addEventListener('change', function () {
                    const file = this.files[0];
                    if (file) {
                        // Validasi ukuran file (max 2MB)
                        if (file.size > 2 * 1024 * 1024) {
                            Swal.fire({
                                title: 'Error!',
                                text: 'Ukuran foto maksimal 2MB',
                                icon: 'error'
                            });
                            this.value = '';
                            return;
                        }

                        const reader = new FileReader();
                        reader.onload = function () {
                            photoPreview.style.display = 'block';
                            photoPreview.src = this.result;
                            dataPhoto.src = this.result;
                            if (photoPreview.nextElementSibling) {
                                photoPreview.nextElementSibling.style.display = 'none';
                            }
                        };

                        reader.readAsDataURL(file);
                    }
                });
            }

            form.addEventListener('submit', function (e) {
                e.preventDefault();
                let filled = 0;

                // Reset error states
                const errorMessages = document.querySelectorAll('.error-message');
                errorMessages.forEach(msg => {
                    msg.style.display = 'none';
                });

                const inputs = form.querySelectorAll('input, select, textarea');
                inputs.forEach(input => {
                    input.classList.remove('error');
                });

                // Validate form
                const requiredInputs = form.querySelectorAll('[required]');
                let isValid = true;
                const latitude = document.getElementById('latitude').value;
                const longitude = document.getElementById('longitude').value;

                if (!latitude || !longitude) {
                    Swal.fire({
                        title: 'Peringatan!',
                        text: 'Silakan tentukan lokasi rumah di peta',
                        icon: 'warning'
                    });
                    return false;

                    // Scroll ke peta
                    document.getElementById('map').scrollIntoView({
                        behavior: 'smooth',
                        block: 'center'
                    });
                }
                requiredInputs.forEach(input => {
                    if (!input.value.trim()) {
                        input.classList.add('error');
                        const errorId = input.id + '_error';
                        const errorElement = document.getElementById(errorId);
                        if (errorElement) {
                            errorElement.style.display = 'block';
                        }
                        isValid = false;
                    } else {
                        filled++;
                    }
                });

                // Update progress bar jika ada
                if (progressBar) {
                    progressBar.style.width = `${(filled / requiredInputs.length) * 100}%`;
                }

                // Validasi khusus untuk foto
                if (!photoInput.files || photoInput.files.length === 0) {
                    photoInput.classList.add('error');
                    isValid = false;
                }

                if (isValid) {
                    // Jika form valid, tampilkan data hasil
                    showDataResult();
                } else {
                    // Jika form tidak valid
                    const firstError = form.querySelector('.error');
                    if (firstError) {
                        firstError.scrollIntoView({
                            behavior: 'smooth',
                            block: 'center'
                        });
                    }
                }
            });

            // Fungsi untuk menampilkan data hasil
            function showDataResult() {
                // Format tempat tanggal lahir
                const tanggalLahir = new Date(document.getElementById('tanggal_lahir').value);
                const options = { day: 'numeric', month: 'long', year: 'numeric' };
                const formattedDate = tanggalLahir.toLocaleDateString('id-ID', options);

                // Isi data hasil
                document.getElementById('dataNamaLengkap').textContent = document.getElementById('nama_lengkap').value;
                document.getElementById('dataNamaPanggilan').textContent = document.getElementById('nama_panggilan').value;
                document.getElementById('dataAgama').textContent = document.getElementById('agama').value;

                document.getElementById('dataTtl').textContent = `${document.getElementById('tempat_lahir').value}, ${formattedDate}`;

                document.getElementById('dataAnakKe').textContent = document.getElementById('anak_ke').value;
                document.getElementById('dataJumlahSaudara').textContent = document.getElementById('jumlah_saudara').value;
                document.getElementById('dataNoHp').textContent = document.getElementById('no_hp').value;
                document.getElementById('dataNoInduk').textContent = document.getElementById('no_induk').value;
                document.getElementById('dataNisn').textContent = document.getElementById('nisn').value;
                document.getElementById('dataKelas').textContent = document.getElementById('kelas').value;
                document.getElementById('dataJurusan').textContent = document.getElementById('jurusan').value;
                document.getElementById('dataNamaAyah').textContent = document.getElementById('nama_ayah').value;
                document.getElementById('dataPekerjaanAyah').textContent = document.getElementById('pekerjaan_ayah').value;
                document.getElementById('dataPendidikanAyah').textContent = document.getElementById('pendidikan_ayah').value;
                document.getElementById('dataNamaIbu').textContent = document.getElementById('nama_ibu').value;
                document.getElementById('dataPekerjaanIbu').textContent = document.getElementById('pekerjaan_ibu').value;
                document.getElementById('dataPendidikanIbu').textContent = document.getElementById('pendidikan_ibu').value;
                // document.getElementById('dataKecamatan').textContent = document.getElementById('kecamatan').value;
                // document.getElementById('dataDesa').textContent = document.getElementById('desa').value;

                // Format alamat lengkap
                const alamat = `${document.getElementById('jalan').value}, RT ${document.getElementById('rt').value}/RW ${document.getElementById('rw').value}, ${document.getElementById('desa').value}, ${document.getElementById('kecamatan').value}`;
                document.getElementById('dataAlamat').textContent = alamat;

                // Sembunyikan form dan tampilkan data hasil
                formContainer.style.display = 'none';
                document.querySelector('.form-footer').style.display = 'none';
                document.querySelector('.progress-container').style.display = 'none';
                dataContainer.style.display = 'block';

                // Scroll ke data hasil
                dataContainer.scrollIntoView({ behavior: 'smooth' });

                // Tambahkan ke fungsi showDataResult() untuk menampilkan lokasi di data hasil
        const dataAlamatSection = document.querySelector('.data-section:last-child');
        dataAlamatSection.innerHTML += `
    <div class="data-row">
        <div class="data-label">Koordinat Lokasi:</div>
        <div class="data-value" id="dataKoordinat"></div>
    </div>
    <div class="data-row">
        <div class="data-label">Peta Lokasi:</div>
        <div class="data-value">
            <div id="dataMap" style="height: 200px; width: 100%; border: 1px solid #ddd; border-radius: 5px;"></div>
        </div>
    </div>
`;

        // Tambahkan di akhir fungsi showDataResult()
        const latitude = document.getElementById('latitude').value || -8.3056;
        const longitude = document.getElementById('longitude').value || 114.2811;
        document.getElementById('dataKoordinat').textContent = `${latitude}, ${longitude}`;

        // Tampilkan peta di data hasil
        setTimeout(() => {
            const dataMap = L.map('dataMap').setView([latitude, longitude], 15);
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
            }).addTo(dataMap);

            L.marker([latitude, longitude]).addTo(dataMap)
                .bindPopup("<b>Lokasi Rumah</b>")
                .openPopup();
        }, 100);
            }

            // Fungsi untuk kembali ke form
            window.backToForm = function () {
                formContainer.style.display = 'flex';
                document.querySelector('.form-footer').style.display = 'block';
                document.querySelector('.progress-container').style.display = 'block';
                dataContainer.style.display = 'none';

                // Scroll ke form
                formContainer.scrollIntoView({ behavior: 'smooth' });
            }

            // Highlight required fields on focus
            const requiredFields = form.querySelectorAll('[required]');
            requiredFields.forEach(field => {
                field.addEventListener('focus', function () {
                    this.classList.remove('error');
                    const errorId = this.id + '_error';
                    const errorElement = document.getElementById(errorId);
                    if (errorElement) {
                        errorElement.style.display = 'none';
                    }
                });
            });
        });
        // Tambahkan setelah semua kode JavaScript yang ada

        // Load Leaflet CSS dan JS (tambahkan di head jika belum ada)
        const leafletCSS = document.createElement('link');
        leafletCSS.rel = 'stylesheet';
        leafletCSS.href = 'https://unpkg.com/leaflet@1.7.1/dist/leaflet.css';
        document.head.appendChild(leafletCSS);

        const leafletJS = document.createElement('script');
        leafletJS.src = 'https://unpkg.com/leaflet@1.7.1/dist/leaflet.js';
        leafletJS.onload = function () {
            initializeMap();
            initializeResultMap();
        };
        document.head.appendChild(leafletJS);
        function initializeMap() {
            // Default koordinat (contoh: SMK Muhammadiyah 6 Rogojampi)
            const defaultLat = -8.3056;
            const defaultLng = 114.2811;

            // Inisialisasi peta
            const map = L.map('map').setView([defaultLat, defaultLng], 15);

            // Tambahkan tile layer (OpenStreetMap)
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
            }).addTo(map);

            // Tambahkan marker dengan drag and drop
            const marker = L.marker([defaultLat, defaultLng], {
                draggable: true
            }).addTo(map)
                .bindPopup("<b>Lokasi Rumah</b><br>Geser pin ke lokasi yang tepat")
                .openPopup();

            // Tambahkan custom icon untuk marker
            marker.setIcon(
                L.divIcon({
                    html: '<i class="fas fa-home" style="color: #db8d34; font-size: 24px;"></i>',
                    iconSize: [24, 24],
                    className: 'map-marker-label'
                })
            );

            // Update koordinat saat marker digeser
            marker.on('dragend', function (event) {
                const position = marker.getLatLng();
                document.getElementById('latitude').value = position.lat;
                document.getElementById('longitude').value = position.lng;
            });

            // Tambahkan event untuk klik peta
            map.on('click', function (e) {
                marker.setLatLng(e.latlng);
                document.getElementById('latitude').value = e.latlng.lat;
                document.getElementById('longitude').value = e.latlng.lng;
            });

            // Coba dapatkan lokasi pengguna
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(function (position) {
                    const userLat = position.coords.latitude;
                    const userLng = position.coords.longitude;

                    // Update marker position
                    marker.setLatLng([userLat, userLng]);
                    map.setView([userLat, userLng], 15);

                    // Update hidden inputs
                    document.getElementById('latitude').value = userLat;
                    document.getElementById('longitude').value = userLng;
                }, function (error) {
                    console.error("Error getting location: ", error);
                });
            }
        }

       
        
    </script>
</body>

</html>